<!DOCTYPE html>
<html lang="en">

<head>
    <title>Desafio opcional - Feriados de Chile</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Isabel de la Cuadra Lunas">
    <meta name="description" content="Feriados de Chile">
    <meta name="keywords" content="jQuery, Apis">

    <!-- Bootstrap CSS 5.1.3-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!--JQuery-->
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <!--1. Cargar jQuery en el proyecto y armar una estructura básica y simple en html para el problema.
        2. Crear un código para consumir la API con jQuery.
        3. Utilizar JSON de respuesta y mostrar los datos en una tabla de HTML.-->

    <script>
        $(document).ready(function() {
            $.ajax({
                type: "GET",
                url: "https://www.feriadosapp.com/api/holidays.json",
                dataType: "json",
                success: function(respuesta) {

                    var titulos = document.getElementById("titulos");
                    var textoTitulo = "";
                    var cabeceraColumnas = document.getElementById("cabeceraColumnas");
                    for (let clave in respuesta.data[0]) {
                        textoTitulo = textoTitulo + "<th scope='col'>" + clave.toUpperCase() + "</th>";
                    }
                    titulos.innerHTML = textoTitulo

                    var valores = document.getElementById("valores");
                    var textoValores = "";
                    for (let objeto of respuesta.data) {
                        var valorFilaTr = "";
                        for (let clave in objeto) {
                            valorFilaTr = valorFilaTr + "<td>" + objeto[clave] + "</td>";
                        }
                        textoValores = textoValores + "<tr>" + valorFilaTr + "</tr>"
                    }
                    valores.innerHTML = textoValores

                }
            });

            //fin jquery
        });
    </script>


</head>

<body>
    <h1 class="text-center fs-1 fw-lighter mt-5">Feriados en Chile año 2022</h1>
    <br>
    <div class="container">
        <table class="table">
            <thead>
                <tr id="titulos">

                </tr>
            </thead>
            <tbody id="valores">

            </tbody>
        </table>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>


</body>

</html>